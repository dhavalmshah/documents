<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shop Specifications</title>
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">
  <div class="stackedit__html"><h1 id="cart--checkout-actions">Cart &amp; Checkout Actions</h1>
<p>Following is a detailed guide on the specific APIs to be called for various user actions related to the “Add to Cart” feature</p>
<h2 id="features">Features</h2>
<ol>
<li>
<p><strong>Adding a Product to the Cart</strong>:</p>
<ul>
<li><strong>GraphQL Mutation</strong>: The operation will likely involve a mutation that adds a product variant to the active order (which represents the cart). This mutation will require the ID of the product variant and the quantity.</li>
<li><strong>API</strong>: <code>addItemToOrder</code></li>
<li><strong>Details</strong>: This mutation adds an item to the order. It requires the <code>productVariantId</code> and <code>quantity</code></li>
</ul>
</li>
<li>
<p><strong>Displaying Cart Contents</strong>:</p>
<ul>
<li><strong>GraphQL Query</strong>: To fetch the contents of the cart, a query to retrieve the active order details is necessary. This query should return information about all items in the cart, including product details, quantities, and pricing.</li>
<li><strong>API</strong>: <code>activeOrder</code></li>
<li><strong>Usage</strong>: This query returns the currently active order, including all items, for the session.</li>
</ul>
</li>
<li>
<p><strong>Adjusting Quantity of a Cart Item</strong>:</p>
<ul>
<li><strong>GraphQL Mutation</strong>: This action will require a mutation that updates the quantity of a line item in the active order. The mutation should specify the line item ID and the new quantity.</li>
<li><strong>API</strong>: <code>adjustOrderLine</code></li>
<li><strong>Details</strong>: This mutation adjusts the quantity of an order line. It takes <code>orderLineId</code> and the new <code>quantity</code>.</li>
</ul>
</li>
<li>
<p><strong>Removing an Item from the Cart</strong>:</p>
<ul>
<li><strong>GraphQL Mutation</strong>: To remove an item, a mutation that removes a line item from the active order is used. The mutation would need the line item ID.</li>
<li><strong>API</strong>: <code>removeOrderLine</code></li>
<li><strong>Details</strong>: This mutation removes an order line from the order. It needs the <code>orderLineId</code>.</li>
<li></li>
</ul>
</li>
<li>
<p><strong>Handling Cart State Persistence</strong>:</p>
<ul>
<li><strong>Session Management</strong>: While not directly a GraphQL operation, maintaining the cart state across sessions will involve cookies based storage or localStorage</li>
</ul>
</li>
<li>
<p><strong>Error Handling in Cart Operations</strong>:</p>
<ul>
<li><strong>Error Responses</strong>: Proper handling of errors from GraphQL responses is crucial. This includes parsing error messages and codes from the GraphQL API and displaying appropriate messages to the user.</li>
</ul>
</li>
<li>
<p><strong>View Cart Contents</strong>:</p>
<ul>
<li><strong>API</strong>: <code>activeOrder</code></li>
<li><strong>Usage</strong>: This query returns the currently active order, including all items, for the session.</li>
</ul>
</li>
<li>
<p><strong>Display Pricing Information</strong>:</p>
<ul>
<li><strong>API</strong>: <code>activeOrder</code></li>
<li><strong>Usage</strong>: Along with the active order details, this query includes pricing information for each item and the total cost of the order.</li>
</ul>
</li>
<li>
<p><strong>View Applied Coupons</strong>:</p>
<ul>
<li><strong>API</strong>: <code>activeOrder</code></li>
<li><strong>Usage</strong>: The active order query should also provide details of any applied coupons and the discounts they offer.</li>
</ul>
</li>
<li>
<p><strong>Update Cart View</strong>:</p>
<ul>
<li><strong>API</strong>: <code>activeOrder</code></li>
<li><strong>Usage</strong>: This query should be re-fetched or subscribed to for real-time updates whenever changes are made to the cart.</li>
</ul>
</li>
<li>
<p><strong>Persistent Cart View Across Sessions</strong>:</p>
<ul>
<li><strong>API</strong>: <code>activeOrder</code></li>
<li><strong>Usage</strong>: This API will maintain the cart state across user sessions, provided the session management is correctly set up.</li>
<li></li>
</ul>
</li>
</ol>
<h2 id="flow">Flow</h2>
<p>Below is a sample cart interaction</p>
<pre class=" language-mermaid"><svg id="mermaid-svg-qsK96jqNXFybQ5BN" width="100%" xmlns="http://www.w3.org/2000/svg" height="1025" style="max-width: 982px;" viewBox="-50 -10 982 1025"><style>#mermaid-svg-qsK96jqNXFybQ5BN{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#000000;}#mermaid-svg-qsK96jqNXFybQ5BN .error-icon{fill:#552222;}#mermaid-svg-qsK96jqNXFybQ5BN .error-text{fill:#552222;stroke:#552222;}#mermaid-svg-qsK96jqNXFybQ5BN .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-qsK96jqNXFybQ5BN .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-qsK96jqNXFybQ5BN .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-qsK96jqNXFybQ5BN .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-qsK96jqNXFybQ5BN .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-qsK96jqNXFybQ5BN .marker{fill:#666;stroke:#666;}#mermaid-svg-qsK96jqNXFybQ5BN .marker.cross{stroke:#666;}#mermaid-svg-qsK96jqNXFybQ5BN svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-qsK96jqNXFybQ5BN .actor{stroke:hsl(0,0%,83%);fill:#eee;}#mermaid-svg-qsK96jqNXFybQ5BN text.actor > tspan{fill:#333;stroke:none;}#mermaid-svg-qsK96jqNXFybQ5BN .actor-line{stroke:#666;}#mermaid-svg-qsK96jqNXFybQ5BN .messageLine0{stroke-width:1.5;stroke-dasharray:none;stroke:#333;}#mermaid-svg-qsK96jqNXFybQ5BN .messageLine1{stroke-width:1.5;stroke-dasharray:2,2;stroke:#333;}#mermaid-svg-qsK96jqNXFybQ5BN #arrowhead path{fill:#333;stroke:#333;}#mermaid-svg-qsK96jqNXFybQ5BN .sequenceNumber{fill:white;}#mermaid-svg-qsK96jqNXFybQ5BN #sequencenumber{fill:#333;}#mermaid-svg-qsK96jqNXFybQ5BN #crosshead path{fill:#333;stroke:#333;}#mermaid-svg-qsK96jqNXFybQ5BN .messageText{fill:#333;stroke:#333;}#mermaid-svg-qsK96jqNXFybQ5BN .labelBox{stroke:hsl(0,0%,83%);fill:#eee;}#mermaid-svg-qsK96jqNXFybQ5BN .labelText,#mermaid-svg-qsK96jqNXFybQ5BN .labelText > tspan{fill:#333;stroke:none;}#mermaid-svg-qsK96jqNXFybQ5BN .loopText,#mermaid-svg-qsK96jqNXFybQ5BN .loopText > tspan{fill:#333;stroke:none;}#mermaid-svg-qsK96jqNXFybQ5BN .loopLine{stroke-width:2px;stroke-dasharray:2,2;stroke:hsl(0,0%,83%);fill:hsl(0,0%,83%);}#mermaid-svg-qsK96jqNXFybQ5BN .note{stroke:hsl(60,100%,23.3333333333%);fill:#ffa;}#mermaid-svg-qsK96jqNXFybQ5BN .noteText,#mermaid-svg-qsK96jqNXFybQ5BN .noteText > tspan{fill:#333;stroke:none;}#mermaid-svg-qsK96jqNXFybQ5BN .activation0{fill:#f4f4f4;stroke:#666;}#mermaid-svg-qsK96jqNXFybQ5BN .activation1{fill:#f4f4f4;stroke:#666;}#mermaid-svg-qsK96jqNXFybQ5BN .activation2{fill:#f4f4f4;stroke:#666;}#mermaid-svg-qsK96jqNXFybQ5BN:root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}#mermaid-svg-qsK96jqNXFybQ5BN sequence{fill:apa;}</style><g></g><g><line id="actor58" x1="75" y1="5" x2="75" y2="1014" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="0" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="75" dy="0">User</tspan></text></g><g><line id="actor59" x1="460" y1="5" x2="460" y2="1014" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="385" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="460" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="460" dy="0">Next.js</tspan></text></g><g><line id="actor60" x1="807" y1="5" x2="807" y2="1014" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="732" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="807" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="807" dy="0">Ecom Backend</tspan></text></g><defs><marker id="arrowhead" refX="9" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z"></path></marker></defs><defs><marker id="crosshead" markerWidth="15" markerHeight="8" orient="auto" refX="16" refY="4"><path fill="black" stroke="#000000" stroke-width="1px" d="M 9,2 V 6 L16,4 Z" style="stroke-dasharray: 0, 0;"></path><path fill="none" stroke="#000000" stroke-width="1px" d="M 0,1 L 6,7 M 6,1 L 0,7" style="stroke-dasharray: 0, 0;"></path></marker></defs><defs><marker id="filled-head" refX="18" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><defs><marker id="sequencenumber" refX="15" refY="15" markerWidth="60" markerHeight="40" orient="auto"><circle cx="15" cy="15" r="6"></circle></marker></defs><text x="268" y="80" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Clicks on Add to Cart</text><line x1="75" y1="113" x2="460" y2="113" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="634" y="128" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Sends addItemToOrder mutation</text><line x1="460" y1="161" x2="807" y2="161" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="634" y="176" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Returns updated order</text><line x1="807" y1="209" x2="460" y2="209" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="268" y="224" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Updates cart state and UI</text><line x1="460" y1="257" x2="75" y2="257" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="268" y="272" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Clicks on Checkout</text><line x1="75" y1="305" x2="460" y2="305" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="634" y="320" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Sends transitionOrderToState mutation</text><line x1="460" y1="353" x2="807" y2="353" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="634" y="368" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Returns updated order</text><line x1="807" y1="401" x2="460" y2="401" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="268" y="416" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Redirects to checkout page</text><line x1="460" y1="449" x2="75" y2="449" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="268" y="464" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Enters shipping and billing information</text><line x1="75" y1="497" x2="460" y2="497" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="634" y="512" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Sends updateOrder mutation</text><line x1="460" y1="545" x2="807" y2="545" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="634" y="560" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Returns updated order</text><line x1="807" y1="593" x2="460" y2="593" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="268" y="608" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Updates order details and UI</text><line x1="460" y1="641" x2="75" y2="641" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="268" y="656" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Selects payment method and confirms order</text><line x1="75" y1="689" x2="460" y2="689" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="634" y="704" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Sends createPayment mutation</text><line x1="460" y1="737" x2="807" y2="737" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="634" y="752" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Returns updated order</text><line x1="807" y1="785" x2="460" y2="785" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="634" y="800" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Sends completeOrder mutation</text><line x1="460" y1="833" x2="807" y2="833" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="634" y="848" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Returns updated order</text><line x1="807" y1="881" x2="460" y2="881" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="268" y="896" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Redirects to confirmation page</text><line x1="460" y1="929" x2="75" y2="929" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><g><rect x="0" y="949" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="981.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="75" dy="0">User</tspan></text></g><g><rect x="385" y="949" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="460" y="981.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="460" dy="0">Next.js</tspan></text></g><g><rect x="732" y="949" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="807" y="981.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="807" dy="0">Ecom Backend</tspan></text></g></svg></pre>
<h2 id="queries">Queries</h2>
<p>Here are some possible scenarios and the corresponding GraphQL API calls that need to be made:</p>
<h3 id="adding-a-product-to-the-cart">Adding a product to the cart:</h3>
<p>To add a product to the cart, the user needs to click on the “Add to Cart” button on the product page or the catalog page. This will trigger a mutation that will update the cart state in the store and send a request to the Vendure API with the product ID and the quantity. The mutation might look something like this:</p>
<pre class=" language-graphql"><code class="prism  language-graphql"><span class="token keyword">mutation</span> AddToCart<span class="token punctuation">(</span><span class="token variable">$productId</span><span class="token punctuation">:</span> ID<span class="token operator">!</span><span class="token punctuation">,</span> <span class="token variable">$quantity</span><span class="token punctuation">:</span> Int<span class="token operator">!</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  addItemToOrder<span class="token punctuation">(</span><span class="token attr-name">productVariantId</span><span class="token punctuation">:</span> <span class="token variable">$productId</span><span class="token punctuation">,</span> <span class="token attr-name">quantity</span><span class="token punctuation">:</span> <span class="token variable">$quantity</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    id
    code
    state
    total
    lines <span class="token punctuation">{</span>
      id
      productVariant <span class="token punctuation">{</span>
        id
        name
        price
      <span class="token punctuation">}</span>
      quantity
      totalPrice
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre>
<h3 id="updating-or-removing-an-item-in-the-cart">Updating or removing an item in the cart:</h3>
<p>To update or remove an item in the cart, the user needs to change the quantity input or click on the “Remove” button on the cart page. This will trigger a mutation that will update the cart state in the store and send a request to the API with the order line ID and the new quantity. The mutation might look something like this:</p>
<pre class=" language-graphql"><code class="prism  language-graphql"><span class="token keyword">mutation</span> UpdateCart<span class="token punctuation">(</span><span class="token variable">$orderLineId</span><span class="token punctuation">:</span> ID<span class="token operator">!</span><span class="token punctuation">,</span> <span class="token variable">$quantity</span><span class="token punctuation">:</span> Int<span class="token operator">!</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  adjustOrderLine<span class="token punctuation">(</span><span class="token attr-name">orderLineId</span><span class="token punctuation">:</span> <span class="token variable">$orderLineId</span><span class="token punctuation">,</span> <span class="token attr-name">quantity</span><span class="token punctuation">:</span> <span class="token variable">$quantity</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    id
    code
    state
    total
    lines <span class="token punctuation">{</span>
      id
      productVariant <span class="token punctuation">{</span>
        id
        name
        price
      <span class="token punctuation">}</span>
      quantity
      totalPrice
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre>
<h3 id="proceeding-to-checkout">Proceeding to checkout:</h3>
<p>To proceed to checkout, the user needs to click on the “Checkout” button on the cart page. This will trigger a mutation that will transition the order state from “AddingItems” to “ArrangingPayment” and send a request to the API with the order ID. The mutation might look something like this:</p>
<pre class=" language-graphql"><code class="prism  language-graphql"><span class="token keyword">mutation</span> Checkout<span class="token punctuation">(</span><span class="token variable">$orderId</span><span class="token punctuation">:</span> ID<span class="token operator">!</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  transitionOrderToState<span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token variable">$orderId</span><span class="token punctuation">,</span> <span class="token attr-name">state</span><span class="token punctuation">:</span> <span class="token string">"ArrangingPayment"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    id
    code
    state
    total
    lines <span class="token punctuation">{</span>
      id
      productVariant <span class="token punctuation">{</span>
        id
        name
        price
      <span class="token punctuation">}</span>
      quantity
      totalPrice
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre>
<h3 id="completing-the-order">Completing the order</h3>
<p>To complete the order, the user needs to enter their shipping and billing information, select a payment method, and confirm the order on the checkout page. This will trigger a series of mutations that will update the order details, create a payment, and transition the order state from “ArrangingPayment” to “PaymentSettled” and send requests to the API with the order ID and the input data. The mutations might look something like this:</p>
<pre class=" language-graphql"><code class="prism  language-graphql"><span class="token keyword">mutation</span> UpdateOrderDetails<span class="token punctuation">(</span><span class="token variable">$orderId</span><span class="token punctuation">:</span> ID<span class="token operator">!</span><span class="token punctuation">,</span> <span class="token variable">$input</span><span class="token punctuation">:</span> UpdateOrderInput<span class="token operator">!</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  updateOrder<span class="token punctuation">(</span><span class="token attr-name">input</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token variable">$orderId</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token variable">$input</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    id
    code
    state
    total
    lines <span class="token punctuation">{</span>
      id
      productVariant <span class="token punctuation">{</span>
        id
        name
        price
      <span class="token punctuation">}</span>
      quantity
      totalPrice
    <span class="token punctuation">}</span>
    shippingAddress <span class="token punctuation">{</span>
      fullName
      company
      streetLine1
      streetLine2
      city
      province
      postalCode
      country
      phoneNumber
    <span class="token punctuation">}</span>
    billingAddress <span class="token punctuation">{</span>
      fullName
      company
      streetLine1
      streetLine2
      city
      province
      postalCode
      country
      phoneNumber
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">mutation</span> CreatePayment<span class="token punctuation">(</span><span class="token variable">$orderId</span><span class="token punctuation">:</span> ID<span class="token operator">!</span><span class="token punctuation">,</span> <span class="token variable">$method</span><span class="token punctuation">:</span> String<span class="token operator">!</span><span class="token punctuation">,</span> <span class="token variable">$metadata</span><span class="token punctuation">:</span> JSON<span class="token operator">!</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  addPaymentToOrder<span class="token punctuation">(</span><span class="token attr-name">input</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token attr-name">method</span><span class="token punctuation">:</span> <span class="token variable">$method</span><span class="token punctuation">,</span>
    <span class="token attr-name">metadata</span><span class="token punctuation">:</span> <span class="token variable">$metadata</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    id
    code
    state
    total
    lines <span class="token punctuation">{</span>
      id
      productVariant <span class="token punctuation">{</span>
        id
        name
        price
      <span class="token punctuation">}</span>
      quantity
      totalPrice
    <span class="token punctuation">}</span>
    payments <span class="token punctuation">{</span>
      id
      method
      state
      amount
      metadata
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">mutation</span> CompleteOrder<span class="token punctuation">(</span><span class="token variable">$orderId</span><span class="token punctuation">:</span> ID<span class="token operator">!</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  transitionOrderToState<span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token variable">$orderId</span><span class="token punctuation">,</span> <span class="token attr-name">state</span><span class="token punctuation">:</span> <span class="token string">"PaymentSettled"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    id
    code
    state
    total
    lines <span class="token punctuation">{</span>
      id
      productVariant <span class="token punctuation">{</span>
        id
        name
        price
      <span class="token punctuation">}</span>
      quantity
      totalPrice
    <span class="token punctuation">}</span>
    payments <span class="token punctuation">{</span>
      id
      method
      state
      amount
      metadata
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre>
<h3 id="peristent-cart-view-across-sessions">Peristent Cart View Across Sessions</h3>
<p>To maintain the cart state across user sessions, the query for the active order should use the session token that is stored in the browser’s local storage or cookies. This will allow the user to resume their shopping experience even if they close and reopen the browser. The query might look something like this:</p>
<pre class=" language-graphql"><code class="prism  language-graphql"><span class="token keyword">query</span> ViewCart<span class="token punctuation">(</span><span class="token variable">$sessionToken</span><span class="token punctuation">:</span> String<span class="token operator">!</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  activeOrder<span class="token punctuation">(</span><span class="token attr-name">sessionToken</span><span class="token punctuation">:</span> <span class="token variable">$sessionToken</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    id
    code
    state
    total
    lines <span class="token punctuation">{</span>
      id
      productVariant <span class="token punctuation">{</span>
        id
        name
        price
      <span class="token punctuation">}</span>
      quantity
      totalPrice
    <span class="token punctuation">}</span>
    promotions <span class="token punctuation">{</span>
      couponCode
      description
      adjustmentSource
      adjustmentAmount
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="wishlist">Wishlist</h3>
<p>The wishlist functionality allows user to maintain a list of items in their wishlist. This functionality includes,<br>
Ability to Add Items to Wishlist<br>
Ability to Remove Items from Wishlist<br>
Ability to View Items in Wishlist</p>
<h4 id="technical-flow">Technical Flow</h4>
<ul>
<li>The wishlist is to be read from backend or localstorage and maintained in application state. This will allow us to show the heart icon state on product tiles.</li>
<li>The wishlist from localstorage should be synced with backend on login and removed from localstorage</li>
</ul>
<h4 id="unauthenticated-user">Unauthenticated User</h4>
<p>The wish list is maintained in the localstorage.</p>
<h4 id="authenticated-user">Authenticated User</h4>
<p>The wishlist is maintained in backend and the following Graph QL queries will be used<br>
To add to wish list</p>
<pre class=" language-graphql"><code class="prism  language-graphql"><span class="token keyword">mutation</span> AddToWishlist <span class="token punctuation">{</span>
    addToWishlist<span class="token punctuation">(</span><span class="token attr-name">productId</span><span class="token punctuation">:</span> <span class="token string">"7"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        id
        product <span class="token punctuation">{</span>
            id
            name
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>To get wish list</p>
<pre class=" language-graphql"><code class="prism  language-graphql"><span class="token keyword">query</span> GetWishlist <span class="token punctuation">{</span>
    activeCustomerWishlist <span class="token punctuation">{</span>
        id
        product <span class="token punctuation">{</span>
            id
            name
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>To remove from wishlist</p>
<pre class=" language-graphql"><code class="prism  language-graphql"><span class="token keyword">mutation</span> RemoveFromWishlist <span class="token punctuation">{</span>
    removeFromWishlist<span class="token punctuation">(</span><span class="token attr-name">itemId</span><span class="token punctuation">:</span> <span class="token string">"4"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        id
        productVariant <span class="token punctuation">{</span>
            name
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="login-and-register">Login and Register</h3>
<p>Flow for registration:</p>
<pre class=" language-mermaid"><svg id="mermaid-svg-jvbXtYXWtJoSptoM" width="100%" xmlns="http://www.w3.org/2000/svg" height="545" style="max-width: 630px;" viewBox="-50 -10 630 545"><style>#mermaid-svg-jvbXtYXWtJoSptoM{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#000000;}#mermaid-svg-jvbXtYXWtJoSptoM .error-icon{fill:#552222;}#mermaid-svg-jvbXtYXWtJoSptoM .error-text{fill:#552222;stroke:#552222;}#mermaid-svg-jvbXtYXWtJoSptoM .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-jvbXtYXWtJoSptoM .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-jvbXtYXWtJoSptoM .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-jvbXtYXWtJoSptoM .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-jvbXtYXWtJoSptoM .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-jvbXtYXWtJoSptoM .marker{fill:#666;stroke:#666;}#mermaid-svg-jvbXtYXWtJoSptoM .marker.cross{stroke:#666;}#mermaid-svg-jvbXtYXWtJoSptoM svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-jvbXtYXWtJoSptoM .actor{stroke:hsl(0,0%,83%);fill:#eee;}#mermaid-svg-jvbXtYXWtJoSptoM text.actor > tspan{fill:#333;stroke:none;}#mermaid-svg-jvbXtYXWtJoSptoM .actor-line{stroke:#666;}#mermaid-svg-jvbXtYXWtJoSptoM .messageLine0{stroke-width:1.5;stroke-dasharray:none;stroke:#333;}#mermaid-svg-jvbXtYXWtJoSptoM .messageLine1{stroke-width:1.5;stroke-dasharray:2,2;stroke:#333;}#mermaid-svg-jvbXtYXWtJoSptoM #arrowhead path{fill:#333;stroke:#333;}#mermaid-svg-jvbXtYXWtJoSptoM .sequenceNumber{fill:white;}#mermaid-svg-jvbXtYXWtJoSptoM #sequencenumber{fill:#333;}#mermaid-svg-jvbXtYXWtJoSptoM #crosshead path{fill:#333;stroke:#333;}#mermaid-svg-jvbXtYXWtJoSptoM .messageText{fill:#333;stroke:#333;}#mermaid-svg-jvbXtYXWtJoSptoM .labelBox{stroke:hsl(0,0%,83%);fill:#eee;}#mermaid-svg-jvbXtYXWtJoSptoM .labelText,#mermaid-svg-jvbXtYXWtJoSptoM .labelText > tspan{fill:#333;stroke:none;}#mermaid-svg-jvbXtYXWtJoSptoM .loopText,#mermaid-svg-jvbXtYXWtJoSptoM .loopText > tspan{fill:#333;stroke:none;}#mermaid-svg-jvbXtYXWtJoSptoM .loopLine{stroke-width:2px;stroke-dasharray:2,2;stroke:hsl(0,0%,83%);fill:hsl(0,0%,83%);}#mermaid-svg-jvbXtYXWtJoSptoM .note{stroke:hsl(60,100%,23.3333333333%);fill:#ffa;}#mermaid-svg-jvbXtYXWtJoSptoM .noteText,#mermaid-svg-jvbXtYXWtJoSptoM .noteText > tspan{fill:#333;stroke:none;}#mermaid-svg-jvbXtYXWtJoSptoM .activation0{fill:#f4f4f4;stroke:#666;}#mermaid-svg-jvbXtYXWtJoSptoM .activation1{fill:#f4f4f4;stroke:#666;}#mermaid-svg-jvbXtYXWtJoSptoM .activation2{fill:#f4f4f4;stroke:#666;}#mermaid-svg-jvbXtYXWtJoSptoM:root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}#mermaid-svg-jvbXtYXWtJoSptoM sequence{fill:apa;}</style><g></g><g><line id="actor61" x1="75" y1="5" x2="75" y2="534" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="0" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="75" dy="0">Customer</tspan></text></g><g><line id="actor62" x1="455" y1="5" x2="455" y2="534" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="380" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="455" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="455" dy="0">Backend</tspan></text></g><defs><marker id="arrowhead" refX="9" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z"></path></marker></defs><defs><marker id="crosshead" markerWidth="15" markerHeight="8" orient="auto" refX="16" refY="4"><path fill="black" stroke="#000000" stroke-width="1px" d="M 9,2 V 6 L16,4 Z" style="stroke-dasharray: 0, 0;"></path><path fill="none" stroke="#000000" stroke-width="1px" d="M 0,1 L 6,7 M 6,1 L 0,7" style="stroke-dasharray: 0, 0;"></path></marker></defs><defs><marker id="filled-head" refX="18" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><defs><marker id="sequencenumber" refX="15" refY="15" markerWidth="60" markerHeight="40" orient="auto"><circle cx="15" cy="15" r="6"></circle></marker></defs><text x="265" y="80" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">registerCustomerAccount(email, password)</text><line x1="75" y1="113" x2="455" y2="113" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="265" y="128" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">success</text><line x1="455" y1="161" x2="75" y2="161" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="265" y="176" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">sendVerificationEmail(token)</text><line x1="455" y1="209" x2="75" y2="209" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><g></g><text x="268" y="224" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">clickVerificationLink(token)</text><line x1="80" y1="257" x2="455" y2="257" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="268" y="272" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">verifyCustomerAccount(token)</text><line x1="455" y1="305" x2="80" y2="305" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><g></g><text x="270" y="320" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">success</text><line x1="455" y1="353" x2="85" y2="353" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="270" y="368" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">login(email, password)</text><line x1="85" y1="401" x2="455" y2="401" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><g></g><text x="268" y="416" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">authToken</text><line x1="450" y1="449" x2="85" y2="449" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><g><rect x="0" y="469" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="501.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="75" dy="0">Customer</tspan></text></g><g><rect x="380" y="469" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="455" y="501.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, &quot;sans-serif&quot;;"><tspan x="455" dy="0">Backend</tspan></text></g></svg></pre>
<p>Here are the relevant mutations</p>
<h4 id="login">Login</h4>
<pre class=" language-graphql"><code class="prism  language-graphql"><span class="token keyword">mutation</span> Login <span class="token punctuation">{</span>
    login<span class="token punctuation">(</span><span class="token attr-name">username</span><span class="token punctuation">:</span> <span class="token string">"test@thedevguys.in"</span><span class="token punctuation">,</span> <span class="token attr-name">password</span><span class="token punctuation">:</span> <span class="token string">"test"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span> <span class="token keyword">on</span> CurrentUser <span class="token punctuation">{</span>
            id
            identifier
        <span class="token punctuation">}</span>
        <span class="token operator">...</span> <span class="token keyword">on</span> ErrorResult <span class="token punctuation">{</span>
            errorCode
            message
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="register">Register</h4>
<pre class=" language-graphql"><code class="prism  language-graphql"><span class="token keyword">mutation</span> <span class="token punctuation">{</span>
  registerCustomerAccount<span class="token punctuation">(</span><span class="token attr-name">input</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token attr-name">emailAddress</span><span class="token punctuation">:</span> <span class="token string">"raj.kumar@example.com"</span><span class="token punctuation">,</span>
    <span class="token attr-name">password</span><span class="token punctuation">:</span> <span class="token string">"secret123"</span><span class="token punctuation">,</span>
    <span class="token attr-name">title</span><span class="token punctuation">:</span> <span class="token string">"Mr."</span><span class="token punctuation">,</span>
    <span class="token attr-name">firstName</span><span class="token punctuation">:</span> <span class="token string">"Raj"</span><span class="token punctuation">,</span>
    <span class="token attr-name">lastName</span><span class="token punctuation">:</span> <span class="token string">"Kumar"</span><span class="token punctuation">,</span>
    <span class="token attr-name">phoneNumber</span><span class="token punctuation">:</span> <span class="token string">"9876543210"</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="add-customer-address">Add customer address</h4>
<pre class=" language-graphql"><code class="prism  language-graphql"><span class="token keyword">mutation</span> <span class="token punctuation">{</span>
  createCustomerAddress<span class="token punctuation">(</span><span class="token attr-name">input</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token attr-name">fullName</span><span class="token punctuation">:</span> <span class="token string">"Raj Kumar"</span><span class="token punctuation">,</span>
    <span class="token attr-name">company</span><span class="token punctuation">:</span> <span class="token string">"ABC Ltd."</span><span class="token punctuation">,</span>
    <span class="token attr-name">streetLine1</span><span class="token punctuation">:</span> <span class="token string">"123 Main Street"</span><span class="token punctuation">,</span>
    <span class="token attr-name">streetLine2</span><span class="token punctuation">:</span> <span class="token string">"Near XYZ Market"</span><span class="token punctuation">,</span>
    <span class="token attr-name">city</span><span class="token punctuation">:</span> <span class="token string">"Mumbai"</span><span class="token punctuation">,</span>
    <span class="token attr-name">province</span><span class="token punctuation">:</span> <span class="token string">"Maharashtra"</span><span class="token punctuation">,</span>
    <span class="token attr-name">postalCode</span><span class="token punctuation">:</span> <span class="token string">"400070"</span><span class="token punctuation">,</span>
    <span class="token attr-name">countryCode</span><span class="token punctuation">:</span> <span class="token string">"IN"</span><span class="token punctuation">,</span>
    <span class="token attr-name">phoneNumber</span><span class="token punctuation">:</span> <span class="token string">"9876543210"</span><span class="token punctuation">,</span>
    <span class="token attr-name">defaultShippingAddress</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token attr-name">defaultBillingAddress</span><span class="token punctuation">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    id
    fullName
    company
    streetLine1
    streetLine2
    city
    province
    postalCode
    country <span class="token punctuation">{</span>
      code
      name
    <span class="token punctuation">}</span>
    phoneNumber
    defaultShippingAddress
    defaultBillingAddress
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="orders--addresses">Orders &amp; Addresses</h4>
<p>The following sample query can be used to fetch all addresses and orders for customers. Fire this on login and add it to application wide state</p>
<pre class=" language-graphql"><code class="prism  language-graphql"><span class="token keyword">query</span> <span class="token punctuation">{</span>
  customer<span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token string">"1"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    id
    createdAt
    updatedAt
    title
    firstName
    lastName
    phoneNumber
    emailAddress
    addresses <span class="token punctuation">{</span>
      id
      fullName
      company
      streetLine1
      streetLine2
      city
      province
      postalCode
      country <span class="token punctuation">{</span>
        code
        name
      <span class="token punctuation">}</span>
      phoneNumber
      defaultShippingAddress
      defaultBillingAddress
    <span class="token punctuation">}</span>
    orders <span class="token punctuation">{</span>
      items <span class="token punctuation">{</span>
        id
        code
        state
        total
        createdAt
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    user <span class="token punctuation">{</span>
      id
      identifier
    <span class="token punctuation">}</span>
    customFields
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
</div>
</body>

</html>
